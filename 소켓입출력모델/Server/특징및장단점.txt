이 예제를 실행해보면 CPU 사용률이 끝도 없이 올라가고 싱글 코어 CPU에선 100% 사용률이 된다.

멀티코어 CPU에선 대략 1/CPU개수 값으로 나올 것이다.
이는 접속한 클라이언트가 없어도 accept함수가 대기하지 않고 곧바로 리턴해 64~68행 코드를 계속 수행하기 때문이다.

이러한 넌블로킹 소켓을 사용하기 위해 필요한 것은 무엇일까?
장점을 유지하면서 단점을 해결하는 방법에 대해서 깊이 고민해봐야 할 것이다.


넌블로킹 소켓의 특징은 다음과 같다.

장점 :
 - 소켓 함수 호출 시 항상 리턴하므로 조건을 만족하지 않아 스레드가 오랜 시간 정지하는 상황. 즉, 교착 상태가 생기지 않는다.
 - 멀티스레드를 사용하지 않아도 여러 소켓에 대해 돌아가면서 입출력을 처리할 수 있다. 필요하다면 다른 작업도 할 수 있다.

단점 : 
 - 소켓 함수를 호출할 때마다 WSAEWOULDBLOCK과 같은 오류 코드를 확인하고 처리해야 한다.
 - 블로킹 소켓을 사용한 경우보다 CPU 사용률이 훨씬 높다.
